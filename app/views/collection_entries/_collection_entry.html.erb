<br/>
<div id="<%= dom_id collection_entry %>" class="">
  <h3 class="font-extrabold text-lg text-green-800">COLLECTION ENTRY #<%= collection_entry.id %></h3>

  <p class="text-sm"><%= format_date(collection_entry.created_at) %></p><br/>

  <!-- only display the egg entries whose `c_e_id` matches the `id` of the current collection_entry -->

  <% collection_entry.egg_entries.each do |ee| %>
    <div class="text-sm">
      <h4 class="font-semibold">Egg Entry #<%= ee.id %></h4>
      <p>time: <span data-display-timestamp="<%= ee.created_at %>"></p>
      <p>chicken: <%= ee.chicken.name %></p>
      <p>egg count: <%= ee.egg_count %><br/>
      
      <br/>
    </div>
  <% end %>
  <br/>

  <p class="font-bold text-green-600">Eggs Collected: </p>
  <% i = 0 %>
  <% collection_entry.egg_entries.each do |ee| %>
    <% i += (ee.egg_count).to_i %>
  <% end %>
  <%= i %>

  <br/><br/>
</div>

<script>
  addEventListener("pageshow", function (_event) {
    // time
    document.querySelectorAll('[data-display-timestamp]').forEach(function (element) {
      const timestamp = element.dataset.displayTimestamp;
      const time = new Date(timestamp);
      element.innerText = `${time.toLocaleTimeString(undefined, {
        hour: '2-digit',
        minute: '2-digit',
      })}` ;
    });

    // date
    document.querySelectorAll('[data-display-date]').forEach(function (element) {
      const datestamp = element.dataset.displayDate;
      const date = new Date(datestamp);
      element.innerText = `${date.toLocaleDateString()}` ;
    });
  });
</script>